!function(a){"function"==typeof define&&define.amd?define(a):window.purl=a()}(function(){function a(a,b){for(var c=decodeURI(a),d=p[b?"strict":"loose"].exec(c),e={attr:{},param:{},seg:{}},g=14;g--;)e.attr[n[g]]=d[g]||"";return e.param.query=f(e.attr.query),e.param.fragment=f(e.attr.fragment),e.seg.path=e.attr.path.replace(/^\/+|\/+$/g,"").split("/"),e.seg.fragment=e.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),e.attr.base=e.attr.host?(e.attr.protocol?e.attr.protocol+"://"+e.attr.host:e.attr.host)+(e.attr.port?":"+e.attr.port:""):"",e}function b(a){var b=a.tagName;return"undefined"!=typeof b?m[b.toLowerCase()]:b}function c(a,b){if(0===a[b].length)return a[b]={};var c={};for(var d in a[b])c[d]=a[b][d];return a[b]=c,c}function d(a,b,e,f){var g=a.shift();if(g){var h=b[e]=b[e]||[];"]"==g?j(h)?""!==f&&h.push(f):"object"==typeof h?h[k(h).length]=f:h=b[e]=[b[e],f]:~g.indexOf("]")?(g=g.substr(0,g.length-1),!q.test(g)&&j(h)&&(h=c(b,e)),d(a,h,g,f)):(!q.test(g)&&j(h)&&(h=c(b,e)),d(a,h,g,f))}else j(b[e])?b[e].push(f):b[e]="object"==typeof b[e]?f:"undefined"==typeof b[e]?f:[b[e],f]}function e(a,b,c){if(~b.indexOf("]")){var e=b.split("[");d(e,a,"base",c)}else{if(!q.test(b)&&j(a.base)){var f={};for(var h in a.base)f[h]=a.base[h];a.base=f}""!==b&&g(a.base,b,c)}return a}function f(a){return i(String(a).split(/&|;/),function(a,b){try{b=decodeURIComponent(b.replace(/\+/g," "))}catch(c){}var d=b.indexOf("="),f=h(b),g=b.substr(0,f||d),i=b.substr(f||d,b.length);return i=i.substr(i.indexOf("=")+1,i.length),""===g&&(g=b,i=""),e(a,g,i)},{base:{}}).base}function g(a,b,c){var d=a[b];"undefined"==typeof d?a[b]=c:j(d)?d.push(c):a[b]=[d,c]}function h(a){for(var b,c,d=a.length,e=0;d>e;++e)if(c=a[e],"]"==c&&(b=!1),"["==c&&(b=!0),"="==c&&!b)return e}function i(a,b){for(var c=0,d=a.length>>0,e=arguments[2];d>c;)c in a&&(e=b.call(void 0,e,a[c],c,a)),++c;return e}function j(a){return"[object Array]"===Object.prototype.toString.call(a)}function k(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function l(b,c){return 1===arguments.length&&b===!0&&(c=!0,b=void 0),c=c||!1,b=b||window.location.toString(),{data:a(b,c),attr:function(a){return a=o[a]||a,"undefined"!=typeof a?this.data.attr[a]:this.data.attr},param:function(a){return"undefined"!=typeof a?this.data.param.query[a]:this.data.param.query},fparam:function(a){return"undefined"!=typeof a?this.data.param.fragment[a]:this.data.param.fragment},segment:function(a){return"undefined"==typeof a?this.data.seg.path:(a=0>a?this.data.seg.path.length+a:a-1,this.data.seg.path[a])},fsegment:function(a){return"undefined"==typeof a?this.data.seg.fragment:(a=0>a?this.data.seg.fragment.length+a:a-1,this.data.seg.fragment[a])}}}var m={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],o={anchor:"fragment"},p={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},q=/^[0-9]+$/;return l.jQuery=function(a){null!=a&&(a.fn.url=function(c){var d="";return this.length&&(d=a(this).attr(b(this[0]))||""),l(d,c)},a.url=l)},l.jQuery(window.jQuery),l}),function(a){"use strict";function b(a,b){return this.bctx=null,this.bgPixel=null,this.ctx=null,this.diffChannel=null,this.container=b,this.grid=[],this.ngx=null,this.ngy=null,this.settings=a,this.size=null,this.words=[],this.linkTable=[],this.match=null,this}var c="awesomeCloud",d={size:{grid:8,factor:0,normalize:!0},color:{background:"rgba(255,255,255,0)",start:"#20f",end:"#e00"},options:{color:"gradient",rotationRatio:.3,printMultiplier:1,sort:"highest"},font:"Helvetica, Arial, sans-serif",shape:"circle"};a.fn.awesomeCloud=function(e,f){if("object"==typeof e)f=e;else if("string"==typeof e){var g=this.data("_"+c);return g&&void 0!==d[e]?void 0!==f?(g.settings[e]=f,!0):g.settings[e]:!1}return f=a.extend(!0,{},d,f||{}),this.each(function(){var d=a(this),e=jQuery.extend(!0,{},f),g=new b(e,d);g.create(),d.data("_"+c,g)})},b.prototype={create:function(){var b,d,e,f,g,h=this,i=0,j=null,k=0,l=0,m=c+"TempCheck",n=null,o=!1,p=0,q=.1,r=0,s=0,t=0,u=0,v=null,w=null,x=null;switch(this.settings.weightFactor=function(a){return a*h.settings.size.factor},this.settings.gridSize=Math.max(this.settings.size.grid,4)*this.settings.options.printMultiplier,this.settings.color.start=this.colorToRGBA(this.settings.color.start),this.settings.color.end=this.colorToRGBA(this.settings.color.end),this.settings.color.background=this.colorToRGBA(this.settings.color.background),this.settings.minSize=this.minimumFontSize(),this.settings.ellipticity=1,this.settings.shape){case"square":this.settings.shape=function(a){var b=(a+Math.PI/4)%(2*Math.PI/4);return 1/(Math.cos(b)+Math.sin(b))};break;case"diamond":this.settings.shape=function(a){var b=a%(2*Math.PI/4);return 1/(Math.cos(b)+Math.sin(b))};break;case"x":this.settings.shape=function(a){var b=a%(2*Math.PI/4);return 1/(Math.cos(b)+Math.sin(b)-2*Math.PI/4)};break;case"triangle":this.settings.shape=function(a){var b=(a+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(b)+Math.sqrt(3)*Math.sin(b))};break;case"triangle-forward":this.settings.shape=function(a){var b=a%(2*Math.PI/3);return 1/(Math.cos(b)+Math.sqrt(3)*Math.sin(b))};break;case"pentagon":this.settings.shape=function(a){var b=(a+.955)%(2*Math.PI/5);return 1/(Math.cos(b)+.726543*Math.sin(b))};break;case"star":this.settings.shape=function(a){var b=(a+.955)%(2*Math.PI/10);return(a+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-b)+3.07768*Math.sin(2*Math.PI/10-b)):1/(Math.cos(b)+3.07768*Math.sin(b))};break;case"circle":this.settings.shape=function(){return 1};break;default:this.settings.shape=function(){return 1}}if(this.size={left:this.container.offset().left,top:this.container.offset().top,height:this.container.height()*this.settings.options.printMultiplier,width:this.container.width()*this.settings.options.printMultiplier,screenHeight:this.container.height(),screenWidth:this.container.width()},this.settings.ellipticity=this.size.height/this.size.width,this.settings.ellipticity>2&&(this.settings.ellipticity=2),this.settings.ellipticity<.2&&(this.settings.ellipticity=.2),this.settings.weight={lowest:null,highest:null,average:null},this.container.children().each(function(b){if(v=null,x=null,l=parseInt(a(this).attr("data-weight"),10),k+=l,h.settings.weight.lowest||(h.settings.weight.lowest=l),h.settings.weight.highest||(h.settings.weight.highest=l),l<h.settings.weight.lowest&&(h.settings.weight.lowest=l),l>h.settings.weight.highest&&(h.settings.weight.highest=l),h.settings.weight.average=k/(b+1),a(this).css("display","none"),0===a(this).has("a").length)x=a(this).html();else{var c=a(this).children(":first");v=c.attr("href"),w=c.attr("target"),x=c.html()}h.words.push([x,l,v,w])}),this.settings.range=this.settings.weight.highest-this.settings.weight.lowest,this.settings.size.normalize===!0)for(this.words.sort(function(a,b){return a[1]-b[1]}),i=0;i<this.words.length;i++)null===n?n=this.words[i][1]:this.words[i][1]-n>this.settings.weight.average&&(this.words[i][1]-=(this.words[i][1]-n)/(.38*this.settings.weight.average)+n);if(this.words.sort(function(a,b){return"random"===h.settings.options.sort?.5-Math.random():"lowest"===h.settings.options.sort?a[1]-b[1]:b[1]-a[1]}),this.settings.size.factor===parseInt(0,10)){for(this.settings.size.factor=1,j=c+"SizeTest",o=!1,p=0,q=.1,r=0,s=0,t=0,u=0,b=Math.min(this.size.width,this.size.height),d=this.createCanvas({id:j,width:b,height:b,left:0,top:0}),i=0;i<this.words.length;i++)d.font=this.settings.weightFactor(this.words[i][1])+"px "+this.settings.font,u=d.measureText(this.words[i][0]).width,u>r&&(r=u,s=this.words[i]);for(;!o;)p=this.settings.weightFactor(s[1]),d.font=p.toString(10)+"px "+this.settings.font,u=d.measureText(s[0]).width,u>.95*b?this.settings.size.factor-=q:.9*b>u?this.settings.size.factor+=q:o=!0,t+=1,t>1e4&&(o=!0);this.destroyCanvas(j),this.settings.size.factor-=q}if(this.settings.color.increment={r:(this.settings.color.end.r-this.settings.color.start.r)/this.settings.range,g:(this.settings.color.end.g-this.settings.color.start.g)/this.settings.range,b:(this.settings.color.end.b-this.settings.color.start.b)/this.settings.range,a:(this.settings.color.end.a-this.settings.color.start.a)/this.settings.range},this.ngx=Math.floor(this.size.width/this.settings.gridSize),this.ngy=Math.floor(this.size.height/this.settings.gridSize),this.grid=[],j=c+this.container.attr("id"),this.ctx=this.createCanvas({parent:this.container,id:j,width:this.size.width,height:this.size.height,left:"0px",top:"0px"}),this.bctx=this.createCanvas({id:m,width:1,height:1,left:0,top:0}),this.bctx.fillStyle=this.settings.color.background.rgba,this.bctx.clearRect(0,0,1,1),this.bctx.fillStyle=this.settings.color.background.rgba,this.bctx.fillRect(0,0,1,1),this.bgPixel=this.bctx.getImageData(0,0,1,1).data,"function"!=typeof this.settings.options.color&&"random"!==this.settings.options.color.substr(0,6)&&"gradient"!==this.settings.options.color.substr(0,8)){for(this.bctx.fillStyle=this.colorToRGBA(this.settings.options.color).rgba,this.bctx.fillRect(0,0,1,1),e=this.bctx.getImageData(0,0,1,1).data,i=4;i--;)if(Math.abs(e[i]-this.bgPixel[i])>10){this.diffChannel=i;break}}else this.diffChannel=0/0;for(this.destroyCanvas(m),f=this.ngx;f--;)for(this.grid[f]=[],g=this.ngy;g--;)this.grid[f][g]=!0;return this.ctx.fillStyle=this.settings.color.background.rgba,this.ctx.clearRect(0,0,this.ngx*(this.settings.gridSize+1),this.ngy*(this.settings.gridSize+1)),this.ctx.fillRect(0,0,this.ngx*(this.settings.gridSize+1),this.ngy*(this.settings.gridSize+1)),this.ctx.textBaseline="top",i=0,window.setImmediate(function y(){i>=h.words.length||(h.putWord(h.words[i][0],h.words[i][1],h.words[i][2],h.words[i][3]),i+=1,window.setImmediate(y))}),h.allDone(j),!0},allDone:function(b){var c=this,d=document.getElementById(b);a("#"+b).width(this.size.screenWidth),a("#"+b).height(this.size.screenHeight),a("#"+b).css("display","block"),a("#"+b).css("visibility","visible"),d.addEventListener("mousemove",function(b){var e=0,f=0;(b.layerX||0===b.layerX)&&(e=b.layerX,f=b.layerY),e-=d.offsetLeft,e+=a(d).position().left,e=Math.floor(e*c.settings.options.printMultiplier),f-=d.offsetTop,f+=a(d).position().top,f=Math.floor(f*c.settings.options.printMultiplier),c.match=null;for(var g=0,h=c.linkTable.length;h>g;g++){var i=c.linkTable[g];e>=i.x&&e<=i.x+i.width&&f>=i.y&&f<=i.y+i.height&&(c.match=i)}document.body.style.cursor=null!==c.match?"pointer":""},!1),d.addEventListener("click",function(){null!==c.match&&(c.match.target?window.open(c.match.link,c.match.target):window.location=c.match.link)},!1)},minimumFontSize:function(){for(var a,b,d=c+"FontTest",e=this.createCanvas({id:d,width:50,height:50,left:0,top:0}),f=20;f;){if(e.font=f.toString(10)+"px sans-serif",e.measureText("Ｗ").width===a&&e.measureText("m").width===b)return this.destroyCanvas(d),(f+1)/2;a=e.measureText("Ｗ").width,b=e.measureText("m").width,f-=1}return this.destroyCanvas(d),0},createCanvas:function(b){var c,d=b.id,e=a("body");return void 0!==b.parent&&(e=b.parent),e.append('<canvas id="'+d+'" width="'+b.width+'" height="'+b.height+'">.</canvas>'),a("#"+d).css("visibility","hidden"),a("#"+d).css("display","none"),a("#"+d).css("position","relative"),a("#"+d).css("z-index",1e4),a("#"+d).width(b.width),a("#"+d).height(b.height),a("#"+d).offset({top:b.top,left:b.left}),c=document.getElementById(d),c.setAttribute("width",b.width),c.setAttribute("height",b.height),c.getContext("2d")},destroyCanvas:function(b){a("#"+b).remove()},putWord:function(a,b,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this,v=Math.random()<this.settings.options.rotationRatio,w=this.settings.weightFactor(b),x=null,y=null;if(w<=this.settings.minSize)return!1;for(this.ctx.font=w.toString(10)+"px "+this.settings.font,v?(x=this.ctx.measureText(a).width,y=Math.max(w,this.ctx.measureText("m").width,this.ctx.measureText("Ｗ").width),/[Jgpqy]/.test(a)&&(y*=1.5),y+=Math.floor(w/6),x+=Math.floor(w/6)):(y=this.ctx.measureText(a).width,x=Math.max(w,this.ctx.measureText("m").width,this.ctx.measureText("Ｗ").width),/[Jgpqy]/.test(a)&&(x*=1.5),x+=Math.floor(w/6),y+=Math.floor(w/6)),y=Math.ceil(y),x=Math.ceil(x),i=Math.ceil(y/this.settings.gridSize),j=Math.ceil(x/this.settings.gridSize),k=[this.ngx/2,this.ngy/2],l=Math.floor(Math.sqrt(this.ngx*this.ngx+this.ngy*this.ngy)),m=this.ngx+this.ngy,n=l+1;n--;){for(o=m,t=[];o--;)p=this.settings.shape(o/m*2*Math.PI),t.push([Math.floor(k[0]+(l-n)*p*Math.cos(-o/m*2*Math.PI)-i/2),Math.floor(k[1]+(l-n)*p*this.settings.ellipticity*Math.sin(-o/m*2*Math.PI)-j/2),o/m*2*Math.PI]);if(t.shuffle().some(function(k){return u.canFitText(k[0],k[1],i,j)?(g=Math.floor(k[0]*u.settings.gridSize+(i*u.settings.gridSize-y)/2),h=Math.floor(k[1]*u.settings.gridSize+(j*u.settings.gridSize-x)/2),v?(s=c+"Rotator",r=u.createCanvas({id:s,width:y,height:x,left:0,top:0}),q=document.getElementById(s),r.fillStyle=u.settings.color.background.rgba,r.fillRect(0,0,y,x),r.fillStyle=u.wordcolor(a,b,w,l-n,k[2]),r.font=w.toString(10)+"px "+u.settings.font,r.textBaseline="top",v&&(r.translate(0,x),r.rotate(-Math.PI/2)),r.fillText(a,Math.floor(w/6),0),u.ctx.clearRect(g,h,y,x),u.ctx.drawImage(q,g,h,y,x),u.destroyCanvas(s)):(f=w.toString(10)+"px "+u.settings.font,u.ctx.font=f,u.ctx.fillStyle=u.wordcolor(a,b,w,l-n,k[2]),u.ctx.fillText(a,g,h),x=u.getTextHeight(f).height,y=u.ctx.measureText(a).width),null!==d&&u.linkTable.push({x:g,y:h,width:y,height:x,word:a,link:d,target:e}),u.updateGrid(k[0],k[1],i,j),!0):!1}))return!0}return!1},canFitText:function(a,b,c,d){if(0>a||0>b||a+c>this.ngx||b+d>this.ngy)return!1;for(var e,f=c;f--;)for(e=d;e--;)if(!this.grid[a+f][b+e])return!1;return!0},wordcolor:function(a,b,c,d,e){var f=null;switch(this.settings.options.color){case"gradient":f="rgba("+Math.round(this.settings.color.start.r+this.settings.color.increment.r*(b-this.settings.weight.lowest))+","+Math.round(this.settings.color.start.g+this.settings.color.increment.g*(b-this.settings.weight.lowest))+","+Math.round(this.settings.color.start.b+this.settings.color.increment.b*(b-this.settings.weight.lowest))+","+Math.round(this.settings.color.start.a+this.settings.color.increment.a*(b-this.settings.weight.lowest))+")";break;case"random-dark":f="rgba("+Math.floor(128*Math.random()).toString(10)+","+Math.floor(128*Math.random()).toString(10)+","+Math.floor(128*Math.random()).toString(10)+",1)";break;case"random-light":f="rgba("+Math.floor(128*Math.random()+128).toString(10)+","+Math.floor(128*Math.random()+128).toString(10)+","+Math.floor(128*Math.random()+128).toString(10)+",1)";break;default:f="function"!=typeof this.settings.wordColor?"rgba(127,127,127,1)":this.settings.wordColor(a,b,c,d,e)}return f},updateGrid:function(a,b,c,d,e){for(var f,g=c,h=this.ctx.getImageData(a*this.settings.gridSize,b*this.settings.gridSize,c*this.settings.gridSize,d*this.settings.gridSize);g--;)for(f=d;f--;)this.isGridEmpty(h,g*this.settings.gridSize,f*this.settings.gridSize,c*this.settings.gridSize,d*this.settings.gridSize,e)||(this.grid[a+g][b+f]=!1)},isGridEmpty:function(a,b,c,d,e,f){var g,h,i=this.settings.gridSize;if(isNaN(this.diffChannel)||f){for(;i--;)for(g=this.settings.gridSize;g--;)for(h=4;h--;)if(this.getChannelData(a.data,b+i,c+g,d,e,h)!==this.bgPixel[h])return!1}else for(;i--;)for(g=this.settings.gridSize;g--;)if(this.getChannelData(a.data,b+i,c+g,d,e,this.diffChannel)!==this.bgPixel[this.diffChannel])return!1;return!0},getChannelData:function(a,b,c,d,e,f){return a[4*(c*d+b)+f]},colorToRGBA:function(a){a=a.replace(/^\s*#|\s*$/g,""),3===a.length&&(a=a.replace(/(.)/g,"$1$1")),a=a.toLowerCase();var b,c,d,e,f,g,h,i,j,k,l={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},m=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),1]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d+(?:\.\d+)?|\.\d+)\s*\)/,example:["rgb(123, 234, 45, 1)","rgb(255,234,245, 0.5)"],process:function(a){return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16),1]}}];for(f in l)a===f&&(a=l[f]);for(g=0;g<m.length;g++)h=m[g].re,i=m[g].process,j=h.exec(a),j&&(k=i(j),b=k[0],c=k[1],d=k[2],e=k[3]);return b=0>b||isNaN(b)?0:b>255?255:b,c=0>c||isNaN(c)?0:c>255?255:c,d=0>d||isNaN(d)?0:d>255?255:d,e=0>e||isNaN(e)?0:e>1?1:e,{r:b,g:c,b:d,a:e,rgba:"rgba("+b+", "+c+", "+d+", "+e+")"}},getTextHeight:function(b){var c=a('<span style="font: '+b+'">Hg</span>'),d=a('<div style="display: inline-block; width: 1px; height: 0px;"></div>'),e=a("<div></div>"),f=a("body"),g={};e.append(c,d),f.append(e);try{g={},d.css({verticalAlign:"baseline"}),g.ascent=d.offset().top-c.offset().top,d.css({verticalAlign:"bottom"}),g.height=d.offset().top-c.offset().top,g.descent=g.height-g.ascent}finally{e.remove()}return g}}}(jQuery),Array.prototype.shuffle=function(){"use strict";for(var a,b,c=this.length;c;a=parseInt(Math.random()*c,10),b=this[--c],this[c]=this[a],this[a]=b);return this},window.setImmediate||(window.setImmediate=function(){"use strict";return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(window.postMessage&&window.addEventListener){var a,b=[],c=-1,d=-1,e="zero-timeout-message",f=function(a){return b.push(a),window.postMessage(e,"*"),++d},g=function(a){if(a.data===e&&(a.stopPropagation(),b.length>0)){var d=b.shift();d(),c+=1}};return window.addEventListener("message",g,!0),window.clearImmediate=function(e){"number"!=typeof e||e>d||(a=e-c-1,b[a]=function(){})},f}}()||function(a){window.setTimeout(a,0)}}()),window.clearImmediate||(window.clearImmediate=function(){"use strict";return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(a){window.clearTimeout(a)}}()),!function(a){var b=null;a.modal=function(c,d){a.modal.close();var e,f;if(this.$body=a("body"),this.options=a.extend({},a.modal.defaults,d),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),c.is("a"))if(f=c.attr("href"),/^#/.test(f)){if(this.$elm=a(f),1!==this.$elm.length)return null;this.open()}else this.$elm=a("<div>"),this.$body.append(this.$elm),e=function(a,b){b.elm.remove()},this.showSpinner(),c.trigger(a.modal.AJAX_SEND),a.get(f).done(function(d){b&&(c.trigger(a.modal.AJAX_SUCCESS),b.$elm.empty().append(d).on(a.modal.CLOSE,e),b.hideSpinner(),b.open(),c.trigger(a.modal.AJAX_COMPLETE))}).fail(function(){c.trigger(a.modal.AJAX_FAIL),b.hideSpinner(),c.trigger(a.modal.AJAX_COMPLETE)});else this.$elm=c,this.open()},a.modal.prototype={constructor:a.modal,open:function(){var b=this;this.options.doFade?(this.block(),setTimeout(function(){b.show()},this.options.fadeDuration*this.options.fadeDelay)):(this.block(),this.show()),this.options.escapeClose&&a(document).on("keydown.modal",function(b){27==b.which&&a.modal.close()}),this.options.clickClose&&this.blocker.click(a.modal.close)},close:function(){this.unblock(),this.hide(),a(document).off("keydown.modal")},block:function(){var b=this.options.doFade?0:this.options.opacity;this.$elm.trigger(a.modal.BEFORE_BLOCK,[this._ctx()]),this.blocker=a('<div class="jquery-modal blocker"></div>').css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:this.options.zIndex,background:this.options.overlay,opacity:b}),this.$body.append(this.blocker),this.options.doFade&&this.blocker.animate({opacity:this.options.opacity},this.options.fadeDuration),this.$elm.trigger(a.modal.BLOCK,[this._ctx()])},unblock:function(){this.options.doFade?this.blocker.fadeOut(this.options.fadeDuration,function(){a(this).remove()}):this.blocker.remove()},show:function(){this.$elm.trigger(a.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=a('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass+" current"),this.center(),this.options.doFade?this.$elm.fadeIn(this.options.fadeDuration):this.$elm.show(),this.$elm.trigger(a.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(a.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove(),this.$elm.removeClass("current"),this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration):this.$elm.hide(),this.$elm.trigger(a.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||a('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},center:function(){this.$elm.css({position:"fixed",top:"50%",left:"50%",marginTop:-(this.$elm.outerHeight()/2),marginLeft:-(this.$elm.outerWidth()/2),zIndex:this.options.zIndex+1})},_ctx:function(){return{elm:this.$elm,blocker:this.blocker,options:this.options}}},a.modal.prototype.resize=a.modal.prototype.center,a.modal.close=function(a){if(b){a&&a.preventDefault(),b.close();var c=b.$elm;return b=null,c}},a.modal.resize=function(){b&&b.resize()},a.modal.isActive=function(){return b?!0:!1},a.modal.defaults={overlay:"#000",opacity:.75,zIndex:1,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",spinnerHtml:null,showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},a.modal.BEFORE_BLOCK="modal:before-block",a.modal.BLOCK="modal:block",a.modal.BEFORE_OPEN="modal:before-open",a.modal.OPEN="modal:open",a.modal.BEFORE_CLOSE="modal:before-close",a.modal.CLOSE="modal:close",a.modal.AJAX_SEND="modal:ajax:send",a.modal.AJAX_SUCCESS="modal:ajax:success",a.modal.AJAX_FAIL="modal:ajax:fail",a.modal.AJAX_COMPLETE="modal:ajax:complete",a.fn.modal=function(c){return 1===this.length&&(b=new a.modal(this,c)),this},a(document).on("click.modal",'a[rel="modal:close"]',a.modal.close),a(document).on("click.modal",'a[rel="modal:open"]',function(b){b.preventDefault(),a(this).modal()})}(jQuery),function(a){a.extend({inArrayIn:function(b,c,d){if("string"!=typeof b)return a.inArray.apply(this,arguments);if(c){var e=c.length;for(d=d?0>d?Math.max(0,e+d):d:0,b=b.toLowerCase(),elemNS=b.replace(/ /g,"");e>d;d++)if(d in c&&(arrElem=c[d].toLowerCase(),arrElemNS=arrElem.replace(/ /g,""),b==arrElem||elemNS==arrElemNS))return d}return-1}})}(jQuery),function(a){var b=new Array,c=new Array;a.fn.doAutosize=function(b){var c=a(this).data("minwidth"),d=a(this).data("maxwidth"),e="",f=a(this),g=a("#"+a(this).data("tester_id"));if(e!==(e=f.val())){var h=e.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");g.html(h);var i=g.width(),j=i+b.comfortZone>=c?i+b.comfortZone:c,k=f.width(),l=k>j&&j>=c||j>c&&d>j;l&&f.width(j)}},a.fn.resetAutosize=function(b){var c=a(this).data("minwidth")||b.minInputWidth||a(this).width(),d=a(this).data("maxwidth")||b.maxInputWidth||a(this).closest(".tagsinput").width()-b.inputPadding,e=a(this),f=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"}),g=a(this).attr("id")+"_autosize_tester";!a("#"+g).length>0&&f.attr("id",g),e.data("minwidth",c),e.data("maxwidth",d),e.data("tester_id",g),e.css("width",c)},a.fn.addTag=function(d,e){return e=jQuery.extend({focus:!1,callback:!0},e),this.each(function(){var f=a(this).attr("id"),g=a(this).val().split(b[f]);if(""==g[0]&&(g=new Array),d=jQuery.trim(d),e.unique){var h=a(this).tagExist(d);1==h&&a("#"+f+"_tag").addClass("not_valid")}else var h=!1;if(""!=d&&1!=h){if(a("<span>").addClass("tag").append(a("<span>").text(d).append("&nbsp;&nbsp;"),a("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return a("#"+f).removeTag(escape(d))})).insertBefore("#"+f+"_addTag"),g.push(d),a("#"+f+"_tag").val(""),e.focus?a("#"+f+"_tag").focus():a("#"+f+"_tag").blur(),a.fn.tagsInput.updateTagsField(this,g),e.callback&&c[f]&&c[f].onAddTag){var i=c[f].onAddTag;i.call(this,d,f,"Add")}if(c[f]&&c[f].onChange){var j=g.length,i=c[f].onChange;i.call(this,a(this),g[j-1])}}}),!1},a.fn.removeTag=function(d){return d=unescape(d),this.each(function(){var e=a(this).attr("id"),f=a(this).val().split(b[e]);for(a("#"+e+"_tagsinput .tag").remove(),str="",i=0;i<f.length;i++)f[i]!=d&&(str=str+b[e]+f[i]);if(a.fn.tagsInput.importTags(this,str),c[e]&&c[e].onRemoveTag){var g=c[e].onRemoveTag;g.call(this,d,e,"Remove")}}),!1},a.fn.tagExist=function(c){var d=a(this).attr("id"),e=a(this).val().split(b[d]);return jQuery.inArrayIn(c,e)>=0},a.fn.importTags=function(b){id=a(this).attr("id"),a("#"+id+"_tagsinput .tag").remove(),a.fn.tagsInput.importTags(this,b)},a.fn.tagsInput=function(d){var e=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},d);return this.each(function(){e.hide&&a(this).hide();var d=a(this).attr("id");(!d||b[a(this).attr("id")])&&(d=a(this).attr("id","tags"+(new Date).getTime()).attr("id"));var f=jQuery.extend({pid:d,real_input:"#"+d,holder:"#"+d+"_tagsinput",input_wrapper:"#"+d+"_addTag",fake_input:"#"+d+"_tag"},e);b[d]=f.delimiter,(e.onAddTag||e.onRemoveTag||e.onChange)&&(c[d]=new Array,c[d].onAddTag=e.onAddTag,c[d].onRemoveTag=e.onRemoveTag,c[d].onChange=e.onChange);var g='<div id="'+d+'_tagsinput" class="tagsinput"><div id="'+d+'_addTag">';if(e.interactive&&(g=g+'<input id="'+d+'_tag" value="" data-default="'+e.defaultText+'" />'),g+='</div><div class="tags_clear"></div></div>',a(g).insertAfter(this),a(f.holder).css("width",e.width),a(f.holder).css("min-height",e.height),a(f.holder).css("height","100%"),""!=a(f.real_input).val()&&a.fn.tagsInput.importTags(a(f.real_input),a(f.real_input).val()),e.interactive){if(a(f.fake_input).val(a(f.fake_input).attr("data-default")),a(f.fake_input).css("color",e.placeholderColor),a(f.fake_input).resetAutosize(e),a(f.holder).bind("click",f,function(b){a(b.data.fake_input).focus()}),a(f.fake_input).bind("focus",f,function(b){a(b.data.fake_input).val()==a(b.data.fake_input).attr("data-default")&&a(b.data.fake_input).val(""),a(b.data.fake_input).css("color","#000000")}),void 0!=e.autocomplete_url){autocomplete_options={source:e.autocomplete_url};for(attrname in e.autocomplete)autocomplete_options[attrname]=e.autocomplete[attrname];void 0!==jQuery.Autocompleter?(a(f.fake_input).autocomplete(e.autocomplete_url,e.autocomplete),a(f.fake_input).bind("result",f,function(b,c){c&&a("#"+d).addTag(c[0]+"",{focus:!0,unique:e.unique})})):void 0!==jQuery.ui.autocomplete&&(a(f.fake_input).autocomplete(autocomplete_options),a(f.fake_input).bind("autocompleteselect",f,function(b,c){return a(b.data.real_input).addTag(c.item.value,{focus:!0,unique:e.unique}),!1}))}else a(f.fake_input).bind("blur",f,function(b){var c=a(this).attr("data-default");return""!=a(b.data.fake_input).val()&&a(b.data.fake_input).val()!=c?b.data.minChars<=a(b.data.fake_input).val().length&&(!b.data.maxChars||b.data.maxChars>=a(b.data.fake_input).val().length)&&a(b.data.real_input).addTag(a(b.data.fake_input).val(),{focus:!0,unique:e.unique}):(a(b.data.fake_input).val(a(b.data.fake_input).attr("data-default")),a(b.data.fake_input).css("color",e.placeholderColor)),!1});a(f.fake_input).bind("keypress",f,function(b){return b.which==b.data.delimiter.charCodeAt(0)||13==b.which?(b.preventDefault(),b.data.minChars<=a(b.data.fake_input).val().length&&(!b.data.maxChars||b.data.maxChars>=a(b.data.fake_input).val().length)&&a(b.data.real_input).addTag(a(b.data.fake_input).val(),{focus:!0,unique:e.unique}),a(b.data.fake_input).resetAutosize(e),!1):void(b.data.autosize&&a(b.data.fake_input).doAutosize(e))}),f.removeWithBackspace&&a(f.fake_input).bind("keydown",function(b){if(8==b.keyCode&&""==a(this).val()){b.preventDefault();var c=a(this).closest(".tagsinput").find(".tag:last").text(),d=a(this).attr("id").replace(/_tag$/,"");c=c.replace(/[\s]+x$/,""),a("#"+d).removeTag(escape(c)),a(this).trigger("focus")}}),a(f.fake_input).blur(),f.unique&&a(f.fake_input).keydown(function(b){(8==b.keyCode||String.fromCharCode(b.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/))&&a(this).removeClass("not_valid")})}}),this},a.fn.tagsInput.updateTagsField=function(c,d){var e=a(c).attr("id");a(c).val(d.join(b[e]))},a.fn.tagsInput.importTags=function(d,e){a(d).val("");var f=a(d).attr("id"),g=e.split(b[f]);for(i=0;i<g.length;i++)a(d).addTag(g[i],{focus:!1,callback:!1});if(c[f]&&c[f].onChange){var h=c[f].onChange;h.call(d,d,g[i])}}}(jQuery),function(a){"use strict";function b(b,c,d,e){a(b).accordion({event:"click",header:c,heightStyle:"content",collapsible:!0,active:d,beforeActivate:function(a,b){var c,d,e;
return b.newHeader[0]?(c=b.newHeader,d=c.next(".ui-accordion-content")):(c=b.oldHeader,d=c.next(".ui-accordion-content")),e="true"===c.attr("aria-selected"),c.toggleClass("ui-corner-all",e).toggleClass("accordion-header-active ui-state-active ui-corner-top",!e).attr("aria-selected",(!e).toString()),c.children(".ui-icon").toggleClass("ui-icon-triangle-1-e",e).toggleClass("ui-icon-triangle-1-s",!e),d.toggleClass("accordion-content-active",!e),e?d.slideUp():d.slideDown(),!1}}),e&&"function"==typeof e&&e()}function c(b,c,d){b&&c&&d&&a.ajax({url:"/ti/profiles/strengths",type:"PUT",data:{tag:b,type:c.charAt(5).toUpperCase()+c.substring(6),action:d},success:function(){},error:function(a,b,c){alert(c+". Tag not updated"),location.reload(!0)}})}function d(b,c){var d=b.replace(".","#"),e=a("select"+b).length,f="",g=0,h=0,i=!0;a(d+"-1 option:selected").text()===c?(a(b+":not("+d+"-1)").val(""),a(b+":not("+d+"-1)").prop("disabled",!0)):a("select"+b).each(function(b,c){if(f=c.id.split("-").pop(),g=Number(f),""!==a(d+"-"+f).val())a(d+"-"+(g+1).toString()).prop("disabled",!1);else{for(h=Number(f)+1;e>=h;h+=1)a(d+"-"+h.toString()).val(""),a(d+"-"+h.toString()).prop("disabled",!0);i=!1}return i})}function e(b,c){var e=[],f="",g="";a(b).each(function(){f=a(this).val(),g=a(this).text(),f&&g!==c&&e.push({selectID:"."+a(this).id,selectVal:a(this).val()})}),a(b+" option").show(0),e.forEach(function(c){a(b+":not("+c.selectID+") option[value='"+c.selectVal+"']").hide(0)}),d(b,c)}function f(b,c,d,f,g){a.ajax({url:"/ti/profiles/preferences",type:"PUT",data:{prefType:b,typeCategory:c,choiceNum:d,choiceValue:f},success:function(a){e(a,g)},error:function(a,b,c){alert(c+": Preferences not updated"),location.reload(!0)}})}function g(b,c,d,e){a.ajax({url:"/ti/profiles/administrator",type:"PUT",data:{action:b,updateType:c,value:d,id:e},success:function(d){"user"===c&&"Reset"===b?(a("#pw-reset-"+e).val(""),"success"!==d?a("#admin-reset-error").text(d):a("#admin-reset-success").text("Password successfully reset!")):("success"!==d&&alert(d),location.reload(!0))},error:function(){alert("SERVER ERROR. DB not updated"),location.reload(!0)}})}var h=a.url();a("#top-menu a").filter(function(){var b=a(this).url();return b.segment(2)===h.segment(2)}).parent().addClass("active"),a("#profile-menu a, #about-menu a").filter(function(){var b=a(this).url();return b.segment(3)===h.segment(3)}).parent().addClass("active"),a("#profile-filters-container select").change(function(){var b=a("#company-filter").val().trim(),c=a("#team-filter").val().trim();b&&c?a.ajax({url:"/ti/profiles/filter",type:"POST",data:{company:b,department:c},success:function(b){a("#profile-list").html(b.trim()?b:a("#invalid-filter-text").html())},error:function(a,b,c){alert(c+". Unable to return results"),location.reload(!0)}}):a("#profile-list").html(a("#initial-filter-text").html())}),a(document).on("touchstart click",".profile-item",function(){a.ajax({url:"/ti/profiles/detail",type:"POST",data:{profileID:this.id},success:function(b){b.trim()?(a("#modal-content").html(b),a(".modal").modal({fadeDuration:250})):alert("Failed to grab profile detail")},error:function(a,b,c){alert(c)}})}),a(function(){a("#company-filter").trigger("change",[{initial:!0}])}),a("#summary-filters-container select").change(function(){var b=a("#company-filter").val().trim(),c=a("#team-filter").val().trim();b&&c?a.ajax({url:"/ti/summary/filter",type:"POST",data:{company:b,department:c},success:function(b){if(b.trim()){a("#summary-content").html(b);var c={size:{grid:8,normalize:!1},options:{color:"random-dark",printMultiplier:1,sort:"highest"},font:"Futura, Helvetica, sans-serif",shape:"square"};a("#summary-wordcloud").awesomeCloud(c)}else a("#summary-content").html(a("#invalid-filter-text").html())},error:function(a,b,c){alert(c+". Unable to return results"),location.reload(!0)}}):a("#summary-content").html(a("#initial-filter-text").html())}),a("#about-accordion-enable").on("touchstart click",function(){b(".ui-accordion-top","h3",!1),b(".ui-accordion-sub","h4",!1),a("#about-accordion-enable").slideToggle("fast",function(){a("#about-accordion-disable").slideToggle("fast")})}),a("#about-accordion-disable").on("touchstart click",function(){a(".ui-accordion-sub").accordion("destroy"),a(".ui-accordion-top").accordion("destroy"),a("#about-accordion-disable").slideToggle("fast",function(){a("#about-accordion-enable").slideToggle("fast")})}),a(function(){var c,d=a(".ui-accordion-top > div").index(a("div.active"));c=-1===d?!1:d,b(".ui-accordion-top","h3",c),b(".ui-accordion-sub","h4",!1,function(){a("#about-main-text").fadeIn("slow")})}),a(function(){if(a("#tag-box-container").length){var b={width:"100%",height:"100px",defaultText:"Add...",removeWithBackspace:!1,maxChars:20,onAddTag:c,onRemoveTag:c};a("#tags-team").tagsInput(b),a("#tags-company").tagsInput(b),a("#tags-other").tagsInput(b),a("#tag-box-container").fadeIn("slow")}}),a("select.contact-preferences").change(function(b,c){var d=this.id.split("-").shift(),g=this.id.split("-")[1],h="."+d+"-"+g,i="",j="",k="No Preference";c?(a(h+":not("+h.replace(".","#")+"-1) option:contains('"+k+"')").remove(),e(h,k)):(i=this.id.split("-").pop(),j=this.value,i&&f(d,g,i,j,k))}),a("select.meeting-preferences").change(function(){var a=this.id,b=a.split("-").shift(),c=function(){var b="",c=0,d=a.split("-");for(d.shift(),c=0;c<d.length;c+=1)0===c?b=d[c]:b+="-"+d[c];return b}(),d=this.value;d&&""!==d?f(b,c,1,d):location.reload(!0)}),a(".time-update").keyup(function(){var b="#"+this.id+"-btn";a(b).is(":visible")||""===this.value.trim()?""===this.value&&a(b).hide("fast"):a(b).css("visibility","visible").hide().fadeIn().removeClass("hidden")}),a(".time-preference-update").click(function(){var b,c,d,e=this.id.split("-"),g="",h=0;for(e.pop(),h=0;h<e.length;h+=1)0===h?g="#"+e[h]:g+="-"+e[h];b=e.shift(),c=e.pop(),d=a(g).val(),d&&""!==d?(f(b,c,1,d),a("#"+this.id).hide("fast")):location.reload(!0)}),a(function(){a("#contact-help-1").trigger("change",[{initial:!0}]),a("#contact-announcements-1").trigger("change",[{initial:!0}]),a("#contact-brainstorm-1").trigger("change",[{initial:!0}])}),a("button.admin-update").click(function(){var b,c=0,d=this.id.split("-"),e="#"+this.id.replace("btn","input"),f=a(e).val();for(d.shift(),d.pop(),c=0;c<d.length;c+=1)0===c?b=d[c]:b+="-"+d[c];""!==f.trim()&&g("Add",b,f)}),a(".admin-delete").click(function(){var a,b=this.id.split("-"),c=b.pop(),d=0;for(b.pop(),d=0;d<b.length;d+=1)0===d?a=b[d]:a+="-"+b[d];g("Remove",a,c)}),a(document).on("touchstart click",".admin-user",function(){a.ajax({url:"/ti/profiles/administrator/user",type:"POST",data:{profileID:this.id.split("-").pop()},success:function(b){b.trim()?(a("#modal-content").html(b),a(".modal").modal({fadeDuration:250})):alert("Failed to grab user detail")},error:function(a,b,c){alert(c)}})}),a(document).on("touchstart click","button.admin-reset",function(){a("button.admin-reset").prop("disabled",!0),a("#admin-reset-user").show("slide",{direction:"left"},500)}),a(document).on("touchstart click","button.admin-reset-cancel",function(){a("#admin-reset-user").hide("slide",{direction:"left"},500),a("#admin-reset-user input").val(""),a("button.admin-reset").prop("disabled",!1)}),a(document).on("touchstart click","button.admin-reset-confirm",function(){var b=this.id.split("-").pop(),c="user",d=a("#pw-reset-"+b).val();c&&b&&d?g("Reset",c,d,b):alert("Invalid password")}),a(document).on("touchstart click","button.admin-remove",function(){a("button.admin-remove").prop("disabled",!0),a("#admin-remove-user").show("slide",{direction:"up"},500)}),a(document).on("touchstart click","button.admin-remove-cancel",function(){a("#admin-remove-user").hide("slide",{direction:"up"},500),a("button.admin-remove").prop("disabled",!1)}),a(document).on("touchstart click","button.admin-remove-confirm",function(){var a=this.id.split("-").pop(),b="user",c="";b&&a?g("Remove",b,c,a):alert("Could not determine the user ID")})}(jQuery);